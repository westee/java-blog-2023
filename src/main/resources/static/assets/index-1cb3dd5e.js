import{d as c,r as u,o as d,c as a,R as g,a as v,g as m,u as f}from"./index-433ea9bd.js";import{b as o}from"./blog-b243a7f5.js";const y=c({name:"首页",setup:()=>{const s=u(1),l=u(0),t=u([]);d(async()=>{const e=await o.getBlogs({page:s.value});e.status=="ok"&&t.value.push(...e.data)});const{proxy:r}=m();var i=f();const p=e=>{o.getIndexBlogs({page:e}).then(n=>{t.value.push(...n.data),l.value=n.total,s.value=n.page,i.push({path:"/",query:{page:e}})})};return()=>a("div",{id:"index"},[a("div",null,[a("section",{class:"blog-posts"},[t.value.length!=0&&t.value.map((e,n)=>a(g,{class:"item",key:e.id,to:`/detail/${e.id}`},{default:()=>[a("figure",{class:"avatar"},[a("img",{src:e.user.avatar,alt:e.user.username},null),a("figcaption",null,[e.user.username])]),a("h3",null,[e.title,a("span",null,[r.friendlyDate(e.createdAt)])]),a("p",null,[e.description])]}))]),a("section",{class:"pagination"},[a(v("el-pagination"),{layout:"prev, pager, next",total:l.value,"current-page":s.value,"onUpdate:current-page":p},null)])])])}});export{y as default};
